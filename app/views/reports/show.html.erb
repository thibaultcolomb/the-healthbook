
<div class="main">
  <div class="d-flex align-items-center mt-5">
    <%= link_to reports_path do %>
      <i class="fa-solid fa-arrow-left ms-3"></i>
    <% end %>


    <div class="mx-auto text-center">
      <h2><%= @report.title %></h2>
    </div>
  </div>

  <div class="d-flex justify-content-end">
      <%= link_to edit_report_path(@report) do %>
      <i class="fa-solid fa-pen-to-square me-3"></i>

    <% end %>
      <%= link_to "", "data-bs-toggle": "modal", "data-bs-target": "#exampleModal" do %>
      <i class="fa-solid fa-share me-3"></i>
    <% end %>
    <!-- Button trigger modal -->


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">

        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

<details>
  <summary><h2>Share <%= @report.title %></h2>
<h3>by QR Code</h3></summary>
<div class="qr_code">
  <%= @svg.html_safe %>
</div>
</details>


<details>
  <summary><h2>Share <%= @report.title %></h2>
  <h3>by E-mail</h3></summary>
  <div class="email" style="text-align: center;">
  <%= form_with url: report_path(@report), method: :post, html: { style: "display: flex; justify-content: center; align-items: center;" } do |f| %>
    <%= f.label :doctor_email, "Select Doctor:" %>
    <%= f.select :doctor_email, Doctor.all.map { |doctor| ["#{doctor.first_name} #{doctor.last_name} (#{doctor.email})", doctor.email] }, { include_blank: "Select Doctor" }, { style: 'width: 50%' } %>
    <%= f.submit "Share by email", class: "btn bg-primary m-0 p-0 ms-1 p-1" %>
  <% end %>
</details>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

      <%= link_to report_path(@report), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} do %>
      <i class="fa-regular fa-trash-can"></i>
      <% end %>
  </div>


  <%# start card for the report %>
  <div class="one-report-card ">

    <div class="one-report-details p-20">
     <% if @report.doctor.present? %>
  <h4><%=@report.doctor.first_name + " " + @report.doctor.last_name + " | " + @report.doctor.specialty %></h4>
  <div class="d-flex">
     <%= @report.report_date.day %>
          <%= (Date::MONTHNAMES[@report.report_date.month]).first(3) %>
        </div>
<% else %>
  <h4>No doctor selected</h4>
  <div class="d-flex">
     <%= @report.report_date.day %>
          <%= (Date::MONTHNAMES[@report.report_date.month]).first(3) %>
        </div>
<% end %>
      </div>
      </div>
    </div>
  </div>
  <%# end of card for the report %>

  <%# start reports content %>
<div class="one-report-content">
 <%= @report.note.html_safe %>
</div>
 <%# end reports content %>



<div class="one-report-documents">
<h3>original documents</h3>
<%#= @report.uploaded_file %>
</div>
